{% extends "base.html" %}

{% block content %}


    <div class="chat-wrapper">
        <div class="chat-container overflow-auto">
            <ul class="list-group list-group-flush mt-3">
                {% for message in chat %}
                    <li class="list-group-item mt-1">
                        <span class="badge badge-secondary">{{ message.username }}</span>
                        <span>{{ message.text }}</span>
                        {% if session.user == "coder" or session.user == 'alex' %}
                            <a href="{{ url_for('chat_remove_message', message_id=message._id) }}">Remove comment</a>
                        {% endif %}
                    </li>
                {% endfor %}

            </ul>
        </div>
        <div class="submit-message-container mt-3">
            {% if session.user %}
                <form action="{{ url_for('chat_add') }}" method="post">
                    <label for="username"></label>
                    <input type="hidden" name="username" id="username" value="{{ session.user }}">
                    <label for="text-field">Your message</label>
                    <input type="text" name="text-field" id="text-field">
                    <button class="btn btn-primary">submit</button>
                </form>
            {% else %}
                <p>
                    You need to <a href="{{ url_for('login') }}">login</a> to send a message
                </p>
            {% endif %}
        </div>
    </div>
{% endblock %}